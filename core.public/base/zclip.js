/*!
 * zClip :: jQuery ZeroClipboard v1.1.1
 * http://steamdev.com/zclip
 * 2012-04-27 fix swf'position bug and delete default alert by machao(zjcn5205@126.com)
 */
(function($){$.fn.zclip=function(d){if(typeof d=="object"&&!d.length){var e=$.extend({path:'ZeroClipboard.swf',copy:null,beforeCopy:null,afterCopy:null,clickAfter:true,setHandCursor:true,setCSSEffects:true},d);return this.each(function(){var o=$(this);if(o.is(':visible')&&(typeof e.copy=='string'||$.isFunction(e.copy))){ZeroClipboard.setMoviePath(e.path);var c=new ZeroClipboard.Client();if($.isFunction(e.copy)){o.bind('zClip_copy',e.copy)}if($.isFunction(e.beforeCopy)){o.bind('zClip_beforeCopy',e.beforeCopy)}if($.isFunction(e.afterCopy)){o.bind('zClip_afterCopy',e.afterCopy)}c.setHandCursor(e.setHandCursor);c.setCSSEffects(e.setCSSEffects);c.addEventListener('mouseOver',function(a){o.trigger('mouseenter')});c.addEventListener('mouseOut',function(a){o.trigger('mouseleave')});c.addEventListener('mouseDown',function(a){o.trigger('mousedown');if(!$.isFunction(e.copy)){c.setText(e.copy)}else{c.setText(o.triggerHandler('zClip_copy'))}if($.isFunction(e.beforeCopy)){o.trigger('zClip_beforeCopy')}});c.addEventListener('complete',function(a,b){if($.isFunction(e.afterCopy)){o.trigger('zClip_afterCopy')}else{if(b.length>500){b=b.substr(0,500)+"...\n\n("+(b.length-500)+" characters not shown)"}o.removeClass('hover')}if(e.clickAfter){o.trigger('click')}});c.glue(o[0],o.parent()[0]);$(window).bind('load resize',function(){c.reposition()})}})}else if(typeof d=="string"){return this.each(function(){var o=$(this);d=d.toLowerCase();var a=o.data('zclipId');var b=$('#'+a+'.zclip');if(d=="remove"){b.remove();o.removeClass('active hover')}else if(d=="hide"){b.hide();o.removeClass('active hover')}else if(d=="show"){b.show()}})}}})(jQuery);var ZeroClipboard={version:"1.0.7",clients:{},moviePath:'ZeroClipboard.swf',nextId:1,$:function(d){if(typeof(d)=='string')d=document.getElementById(d);if(!d.addClass){d.hide=function(){this.style.display='none'};d.show=function(){this.style.display=''};d.addClass=function(a){this.removeClass(a);this.className+=' '+a};d.removeClass=function(a){var b=this.className.split(/\s+/);var c=-1;for(var k=0;k<b.length;k++){if(b[k]==a){c=k;k=b.length}}if(c>-1){b.splice(c,1);this.className=b.join(' ')}return this};d.hasClass=function(a){return!!this.className.match(new RegExp("\\s*"+a+"\\s*"))}}return d},setMoviePath:function(a){this.moviePath=a},dispatch:function(a,b,c){var d=this.clients[a];if(d){d.receiveEvent(b,c)}},register:function(a,b){this.clients[a]=b},getDOMObjectPosition:function(a,b){var c={left:0,top:0,width:a.width?a.width:a.offsetWidth,height:a.height?a.height:a.offsetHeight};if(a&&(a!=b)){c.left+=a.offsetLeft;c.top+=a.offsetTop}return c},Client:function(a){this.handlers={};this.id=ZeroClipboard.nextId++;this.movieId='ZeroClipboardMovie_'+this.id;ZeroClipboard.register(this.id,this);if(a)this.glue(a)}};ZeroClipboard.Client.prototype={id:0,ready:false,movie:null,clipText:'',handCursorEnabled:true,cssEffects:true,handlers:null,glue:function(a,b,c){this.domElement=ZeroClipboard.$(a);var d=99;if(this.domElement.style.zIndex){d=parseInt(this.domElement.style.zIndex,10)+1}if(typeof(b)=='string'){b=ZeroClipboard.$(b)}else if(typeof(b)=='undefined'){b=document.getElementsByTagName('body')[0]}var e=ZeroClipboard.getDOMObjectPosition(this.domElement,b);this.div=document.createElement('div');this.div.className="zclip";this.div.id="zclip-"+this.movieId;$(this.domElement).data('zclipId','zclip-'+this.movieId);var f=this.div.style;f.position='absolute';f.left=''+e.left+'px';f.top=''+e.top+'px';f.width=''+e.width+'px';f.height=''+e.height+'px';f.zIndex=d;if(typeof(c)=='object'){for(addedStyle in c){f[addedStyle]=c[addedStyle]}}b.appendChild(this.div);this.div.innerHTML=this.getHTML(e.width,e.height)},getHTML:function(a,b){var c='';var d='id='+this.id+'&width='+a+'&height='+b;if(navigator.userAgent.match(/MSIE/)){var e=location.href.match(/^https/i)?'https://':'http://';c+='<object style="position:absolute;left:0;top:0" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="'+e+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0" width="'+a+'" height="'+b+'" id="'+this.movieId+'" align="middle"><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="false" /><param name="movie" value="'+ZeroClipboard.moviePath+'" /><param name="loop" value="false" /><param name="menu" value="false" /><param name="quality" value="best" /><param name="bgcolor" value="#ffffff" /><param name="flashvars" value="'+d+'"/><param name="wmode" value="transparent"/></object>'}else{c+='<embed style="position:absolute;left:0;top:0" id="'+this.movieId+'" src="'+ZeroClipboard.moviePath+'" loop="false" menu="false" quality="best" bgcolor="#ffffff" width="'+a+'" height="'+b+'" name="'+this.movieId+'" align="middle" allowScriptAccess="always" allowFullScreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="'+d+'" wmode="transparent" />'}return c},hide:function(){if(this.div){this.div.style.left='-2000px'}},show:function(){this.reposition()},destroy:function(){if(this.domElement&&this.div){this.hide();this.div.innerHTML='';var a=document.getElementsByTagName('body')[0];try{a.removeChild(this.div)}catch(e){}this.domElement=null;this.div=null}},reposition:function(a){if(a){this.domElement=ZeroClipboard.$(a);if(!this.domElement)this.hide()}if(this.domElement&&this.div){var b=ZeroClipboard.getDOMObjectPosition(this.domElement);var c=this.div.style;c.left=''+b.left+'px';c.top=''+b.top+'px'}},setText:function(a){this.clipText=a;if(this.ready){this.movie.setText(a)}},addEventListener:function(a,b){a=a.toString().toLowerCase().replace(/^on/,'');if(!this.handlers[a]){this.handlers[a]=[]}this.handlers[a].push(b)},setHandCursor:function(a){this.handCursorEnabled=a;if(this.ready){this.movie.setHandCursor(a)}},setCSSEffects:function(a){this.cssEffects=!!a},receiveEvent:function(a,b){a=a.toString().toLowerCase().replace(/^on/,'');switch(a){case'load':this.movie=document.getElementById(this.movieId);if(!this.movie){var c=this;setTimeout(function(){c.receiveEvent('load',null)},1);return}if(!this.ready&&navigator.userAgent.match(/Firefox/)&&navigator.userAgent.match(/Windows/)){var c=this;setTimeout(function(){c.receiveEvent('load',null)},100);this.ready=true;return}this.ready=true;try{this.movie.setText(this.clipText)}catch(e){}try{this.movie.setHandCursor(this.handCursorEnabled)}catch(e){}break;case'mouseover':if(this.domElement&&this.cssEffects){this.domElement.addClass('hover');if(this.recoverActive){this.domElement.addClass('active')}}break;case'mouseout':if(this.domElement&&this.cssEffects){this.recoverActive=false;if(this.domElement.hasClass('active')){this.domElement.removeClass('active');this.recoverActive=true}this.domElement.removeClass('hover')}break;case'mousedown':if(this.domElement&&this.cssEffects){this.domElement.addClass('active')}break;case'mouseup':if(this.domElement&&this.cssEffects){this.domElement.removeClass('active');this.recoverActive=false}break}if(this.handlers[a]){for(var d=0,len=this.handlers[a].length;d<len;d++){var f=this.handlers[a][d];if(typeof(f)=='function'){f(this,b)}else if((typeof(f)=='object')&&(f.length==2)){f[0][f[1]](this,b)}else if(typeof(f)=='string'){window[f](this,b)}}}}};
/*
 * 粘贴组件
 */
var zclip = window.clipboardData ? function(button, txt, callback ){
	$(button).click(function(){
		var ok = true, t = $.isFunction(txt) ? txt() : String(txt);
		try{
			window.clipboardData.clearData();
			window.clipboardData.setData("Text", t);
		}catch(e){
			ok = false;
		}
		callback && callback(ok);
	});
} : function( button, txt, callback ){
	$(button).zclip({
		path : "/files/swf/ZeroClipboard20130715.swf",
		copy : txt,
		afterCopy : callback
	});
};